# Release Notes - Version 1.1.0

**릴리즈 날짜**: 2026-01-09

## 🎉 주요 개선사항

### 1. 관리자 페이지 견적번호 자동완성 기능 추가

관리자가 결제 처리를 더 쉽고 빠르게 할 수 있도록 견적번호 자동완성 기능을 추가했습니다.

**새로운 기능:**
- Google Sheets에서 최근 견적 목록을 자동으로 조회하여 자동완성 제공
- 목록 개수 선택 (20/50/100개)
- "미결제만 보기" 필터 기능
- 견적번호 선택 시 고객 정보 미리보기 (고객명, 이메일, 금액, 상태)
- 새로운 API: `GET /admin/recent-quotes`

**사용법:**
1. 관리자 페이지 접속: `http://localhost:8000/admin?token=your_token`
2. 견적번호 입력란에 입력하면 자동완성 목록이 표시됩니다
3. 목록에서 선택하거나 직접 입력할 수 있습니다
4. 선택한 견적번호의 정보가 미리보기로 표시됩니다

### 2. 견적서 PDF 양식 개선

실제 회사에서 사용하는 견적서 형식으로 완전히 리팩토링했습니다.

**개선사항:**
- 회사 헤더 정보 추가 (회사명, 주소, 연락처)
- 견적 정보 테이블 형식 개선
- 견적 항목 테이블 형식 개선
- 일정 정보 테이블 추가
- 견적 금액 테이블 개선
- 서명란 추가
- 예시 견적서는 양식은 유지하되 내용은 공백으로 처리

### 3. 전체 코드 리팩토링

코드 품질과 유지보수성을 크게 개선했습니다.

**개선사항:**
- 타입 힌팅 개선 및 Optional 타입 명시
- 에러 처리 개선 및 커스텀 예외 클래스 추가
  - `EmailError`: 이메일 관련 예외
  - `PDFGenerationError`: PDF 생성 관련 예외
  - `QuoteGenerationError`: 견적서 생성 관련 예외
- 상수 관리 개선 (PaymentStatus Enum 추가)
- 문서화 개선 (모든 함수에 docstring 추가)
- 코드 중복 제거 및 공통 함수 추출

### 4. PDF 폰트 처리 개선

한글 폰트 깨짐 문제를 완전히 해결했습니다.

**개선사항:**
- Bold 폰트 파일이 없을 경우 Regular 폰트를 Bold로도 사용
- Table 셀의 모든 텍스트를 Paragraph로 감싸 폰트 적용 보장
- 한글 폰트 깨짐 문제 완전 해결

### 5. 설정 파일 개선

회사 정보를 설정 파일에서 관리할 수 있도록 개선했습니다.

**새로운 설정:**
- `COMPANY_NAME`: 회사명
- `COMPANY_ADDRESS`: 회사 주소
- `COMPANY_PHONE`: 회사 전화번호
- `COMPANY_EMAIL`: 회사 이메일
- `COMPANY_CEO`: 대표자명

## 🔧 기술적 개선사항

- API 모델 검증 강화 (validator 추가, 필드 길이 제한)
- 예외 체인 처리 개선 (`from e`)
- 구체적인 예외 타입 사용
- 에러 메시지 개선
- 이메일 마스킹 처리 개선

## 📝 문서화

- CHANGELOG.md 추가
- README.md 업데이트 (새로운 기능 설명 추가)
- 모든 함수에 docstring 추가

## 🐛 버그 수정

- PDF에서 한글 폰트 깨짐 문제 해결
- Table 셀에서 폰트가 적용되지 않던 문제 해결
- Bold 폰트 파일이 없을 때 발생하던 오류 해결

## 🔒 보안 개선

- 관리자 API에 토큰 인증 강화
- 이메일 마스킹 처리 개선

## 📦 마이그레이션 가이드

### 환경변수 추가 (선택사항)

`.env` 파일에 다음 설정을 추가할 수 있습니다:

```env
# 회사 정보 (견적서 PDF에 표시)
COMPANY_NAME=회사명
COMPANY_ADDRESS=서울특별시 ○○구 ○○로 ○○
COMPANY_PHONE=02-0000-0000
COMPANY_EMAIL=info@company.com
COMPANY_CEO=홍길동
```

### API 변경사항

**새로운 엔드포인트:**
- `GET /admin/recent-quotes`: 최근 견적 목록 조회

**기존 엔드포인트 변경 없음:**
- 모든 기존 API는 하위 호환성을 유지합니다

## 🙏 감사합니다

이번 버전 업데이트에 도움을 주신 모든 분들께 감사드립니다.

---

**다음 버전 계획:**
- 더 많은 견적서 템플릿 지원
- 다국어 지원
- 대시보드 기능 강화

